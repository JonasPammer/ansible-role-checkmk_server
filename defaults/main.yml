---
# defaults file of ansible-role jonaspammer.checkmk_server
# See README.adoc for documentation. If you change a default here, also update it in the README.

checkmk_site_url: "http://localhost/{{ checkmk_server_site }}"
checkmk_server_site: "main"

# INSTALL
checkmk_server_prerequisites: "{{
  _checkmk__server_prerequisites[ansible_distribution ~ '_' ~ ansible_distribution_major_version]|default(
  _checkmk__server_prerequisites[ansible_os_family ~ '_' ~ ansible_distribution_major_version])|default(
  _checkmk__server_prerequisites[ansible_distribution])|default(
  _checkmk__server_prerequisites[ansible_os_family])|default(
  _checkmk__server_prerequisites['default']) }}"
checkmk_server_install_cache_valid_time: "3600"

# NOTE: When updating manually, do not forget to
#       also update version in checkmk_agent role!!
# ===== BEGIN generate_yaml MANAGED SECTION

_checkmk_server_download_checksum:
  CentOS_7: sha1:87affa588da9c56b6a80ac425a7d4f3ab1d9028c
  CentOS_8: sha1:cb3a4b8bf35ba6f939710cf4acfb9b7da34c1f45
  Debian_bullseye: sha1:c896a0cdfa2a648229e160c1660a94ba445c5e50
  Debian_buster: sha1:7213547a2f5e336b31a057ef0773f5a88ed42b0d
  Debian_stretch: sha1:3fc6bc7f2c71dac3240b3cf2f5ec5523a4f2457d
  Ubuntu_bionic: sha1:b08c77f31796754af0942e0100fe58675b2b8b54
  Ubuntu_focal: sha1:cce6a669ad56c8a7cbb47a9f50ac31964fe4c96f
  Ubuntu_hirsute: sha1:9947418875f973e2015619f7c3bedd7c7b1c393b
  Ubuntu_impish: sha1:6995f3fd86fa894071ebef05108a30568b15a251
  Ubuntu_jammy: sha1:03902a04795ea5a9d0a5fd71b8d933f8956a4e1e
  Ubuntu_xenial: sha1:c5555ed1cb2dad304a07bc4a326e11d7f5349930
checkmk_server_version: 2.0.0p26

# ===== END generate_yaml MANAGED SECTION
checkmk_server_download_checksum: "{{
  _checkmk_server_download_checksum[ansible_distribution ~ '_' ~ ansible_distribution_release]|default(
  _checkmk_server_download_checksum[ansible_distribution ~ '_' ~ ansible_distribution_major_version])|default(
  _checkmk_server_download_checksum[ansible_os_family ~ '_' ~ ansible_distribution_major_version])|default(
  _checkmk_server_download_checksum[ansible_distribution])|default(
  _checkmk_server_download_checksum[ansible_os_family])|default(
  _checkmk_server_download_checksum['default']) }}"
checkmk_server_download_package: "{{
  _checkmk__server_download_package[ansible_distribution ~ '_' ~ ansible_distribution_major_version]|default(
  _checkmk__server_download_package[ansible_os_family ~ '_' ~ ansible_distribution_major_version])|default(
  _checkmk__server_download_package[ansible_distribution])|default(
  _checkmk__server_download_package[ansible_os_family])|default(
  _checkmk__server_download_package['default']) }}"
checkmk_server_download_url: "https://download.checkmk.com/checkmk/{{ checkmk_server_version }}/{{ checkmk_server_download_package }}"
checkmk_server_download_pubkey_url: "https://download.checkmk.com/checkmk/Check_MK-pubkey.gpg"
checkmk_server_download_dest: "{{ checkmk_server_download_dest_folder }}/{{ checkmk_server_download_package }}"
checkmk_server_download_dest_folder: "/opt"
checkmk_server_download_mode: u=rw,g=r,o=r

checkmk_server_man_mode: u=rwx,g=rx,o=rx
checkmk_server_man_path: "/usr/share/man/man8"

checkmk_server_omd_setup_command: "omd setup"
checkmk_server_omd_setup_creates: "/opt/omd"

# SITE CREATION
checkmk_server_omd_create_command: "omd create {{ checkmk_server_site }}"
checkmk_server_omd_create_creates: "/opt/omd/sites/{{ checkmk_server_site }}"
checkmk_server_log_dest: "/opt/omd/sites/{{ checkmk_server_site }}/omd-create.log"
checkmk_server_log_group: "{{ checkmk_server_site }}"
checkmk_server_log_mode: "u=rw,g=,o="
checkmk_server_log_owner: "{{ checkmk_server_site }}"

checkmk_server_htpasswd_group: "{{ checkmk_server_site }}"
checkmk_server_htpasswd_mode: u=rw,g=rw,o= # pragma: allowlist secret
checkmk_server_htpasswd_name: "cmkadmin" # pragma: allowlist secret
checkmk_server_htpasswd_owner: "{{ checkmk_server_site }}"
checkmk_server_htpasswd_path: "/opt/omd/sites/{{ checkmk_server_site }}/etc/htpasswd"

checkmk_server_omd_start_command: "omd start {{ checkmk_server_site }}"
checkmk_server_omd_start_creates: "/opt/omd/sites/{{ checkmk_server_site }}/tmp/apache/run/apache.pid"

checkmk_apache_service: "{{ apache__service|default(
  _checkmk__apache_service[ansible_distribution ~ '_' ~ ansible_distribution_release])|default(
  _checkmk__apache_service[ansible_distribution ~ '_' ~ ansible_distribution_major_version])|default(
  _checkmk__apache_service[ansible_os_family ~ '_' ~ ansible_distribution_major_version])|default(
  _checkmk__apache_service[ansible_distribution])|default(
  _checkmk__apache_service[ansible_os_family])|default(
  _checkmk__apache_service['default']) }}"

# CONFIG
checkmk_server_site_conf: true

## General
checkmk_server_site_conf_admin_mail: ""
checkmk_server_site_conf_autostart: "on"
checkmk_server_site_conf_core: nagios
checkmk_server_site_conf_tmpfs: "on"

## Web GUI
checkmk_server_site_conf_apache_mode: own
checkmk_server_site_conf_apache_tcp_addr: 127.0.0.1
checkmk_server_site_conf_apache_tcp_port: 5000
checkmk_server_site_conf_multisite_authorisation: "on"
checkmk_server_site_conf_multisite_cookie_auth: "on"
checkmk_server_site_conf_nagios_theme: classicui

## Addons
checkmk_server_site_conf_mkeventd: "on"
checkmk_server_site_conf_mkeventd_snmptrap: "off"
checkmk_server_site_conf_mkeventd_syslog: "off"
checkmk_server_site_conf_mkeventd_syslog_tcp: "off"
checkmk_server_site_conf_pnp4nagios: "on"

## Distributed Monitoring (most important to alter)
checkmk_server_site_conf_livestatus_tcp: "off"
checkmk_server_site_conf_ncsa: "off"
