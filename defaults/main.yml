---
# defaults file of ansible-role jonaspammer.checkmk_server
# See README.adoc for documentation. If you change a default here, also update it in the README.

checkmk_site_url: "http://localhost/{{ checkmk_server_site }}"
checkmk_server_site: "main"
checkmk_server_version: "2.0.0p16"

# INSTALL
checkmk_server_prerequisites: "{{
  _checkmk_server_prerequisites[ansible_distribution ~ '_' ~ ansible_distribution_major_version]|default(
  _checkmk_server_prerequisites[ansible_os_family ~ '_' ~ ansible_distribution_major_version])|default(
  _checkmk_server_prerequisites[ansible_distribution])|default(
  _checkmk_server_prerequisites[ansible_os_family])|default(
  _checkmk_server_prerequisites['default']) }}"
checkmk_server_install_cache_valid_time: "3600"

checkmk_server_download_package: "{{
  _checkmk_server_download_package[ansible_distribution ~ '_' ~ ansible_distribution_major_version]|default(
  _checkmk_server_download_package[ansible_os_family ~ '_' ~ ansible_distribution_major_version])|default(
  _checkmk_server_download_package[ansible_distribution])|default(
  _checkmk_server_download_package[ansible_os_family])|default(
  _checkmk_server_download_package['default']) }}"
_checkmk_server_download_checksum: # default checksums for default of '{{ checkmk_server_version }}'
  CentOS_7: "sha256:faff4ad49ec0e073cc341466eb1191cc404ec2c2dea548d9a7072e529cb75231"
  CentOS_8: "sha256:501a5ae7dd7d14b18cc2164c54a8509e6ebbc50cdb4f40c65616bfad77814669"
  Debian_9: "sha256:eeed6aa1e346fe5e26571d81954ee77d6aeba39faab9af29ca6e16ae51c7a918"
  Debian_10: "sha256:60257216b65a9d6819d125ecb735746bde8c72bd9266f979764792e4c2aec254"
  Debian_11: "sha256:f65bfd7f9b17922c2a4349077a29dd78463717d5fa9de86af18ca651e85896b8"
  Ubuntu_16: "sha256:3d45c34388aeff93ce0dd68f709942ba313c842f735fae8a72b64023c2b6f8a5"
  Ubuntu_18: "sha256:f9635b1b418e30b7d2e9de76808649580a63be071fc78f9cd31992adedf78ed9"
  Ubuntu_20: "sha256:1f37d5e8e4ad7812c59eebe7771f7271d08380a87c7170ddb66c20de34d87871"
  Ubuntu_21: "sha256:cae982d79fd51d4ad203cc0c649c4f54586ee364b19d07d8f1204e114e38e38e"
checkmk_server_download_checksum: "{{
  _checkmk_server_download_checksum[ansible_distribution ~ '_' ~ ansible_distribution_major_version]|default(
  _checkmk_server_download_checksum[ansible_os_family ~ '_' ~ ansible_distribution_major_version])|default(
  _checkmk_server_download_checksum[ansible_distribution])|default(
  _checkmk_server_download_checksum[ansible_os_family])|default(
  _checkmk_server_download_checksum['default']) }}"
checkmk_server_download_url: "https://download.checkmk.com/checkmk/{{ checkmk_server_version }}/{{ checkmk_server_download_package }}"
checkmk_server_download_pubkey_url: "https://download.checkmk.com/checkmk/Check_MK-pubkey.gpg"
checkmk_server_download_dest: "{{ checkmk_server_download_dest_folder }}/{{ checkmk_server_download_package }}"
checkmk_server_download_dest_folder: "/opt"
checkmk_server_download_mode: u=rw,g=r,o=r

checkmk_server_man_mode: u=rwx,g=rx,o=rx
checkmk_server_man_path: "/usr/share/man/man8"

checkmk_server_omd_setup_command: "omd setup"
checkmk_server_omd_setup_creates: "/opt/omd"

# SITE CREATION
checkmk_server_omd_create_command: "omd create {{ checkmk_server_site }}"
checkmk_server_omd_create_creates: "/opt/omd/sites/{{ checkmk_server_site }}"
checkmk_server_log_dest: "/opt/omd/sites/{{ checkmk_server_site }}/omd-create.log"
checkmk_server_log_group: "{{ checkmk_server_site }}"
checkmk_server_log_mode: "u=rw,g=,o="
checkmk_server_log_owner: "{{ checkmk_server_site }}"

checkmk_server_htpasswd_group: "{{ checkmk_server_site }}"
checkmk_server_htpasswd_mode: u=rw,g=rw,o= # pragma: allowlist secret
checkmk_server_htpasswd_name: "cmkadmin" # pragma: allowlist secret
checkmk_server_htpasswd_owner: "{{ checkmk_server_site }}"
checkmk_server_htpasswd_path: "/opt/omd/sites/{{ checkmk_server_site }}/etc/htpasswd"

checkmk_server_omd_start_command: "omd start {{ checkmk_server_site }}"
checkmk_server_omd_start_creates: "/opt/omd/sites/{{ checkmk_server_site }}/tmp/apache/run/apache.pid"

# CONFIG
checkmk_server_site_conf: true

## General
checkmk_server_site_conf_ADMIN_MAIL:
checkmk_server_site_conf_AUTOSTART: "on"
checkmk_server_site_conf_CORE: nagios
checkmk_server_site_conf_TMPFS: "on"

## Web GUI
checkmk_server_site_conf_APACHE_MODE: own
checkmk_server_site_conf_APACHE_TCP_ADDR: 127.0.0.1
checkmk_server_site_conf_APACHE_TCP_PORT: 5000
checkmk_server_site_conf_MULTISITE_AUTHORISATION: "on"
checkmk_server_site_conf_MULTISITE_COOKIE_AUTH: "on"
checkmk_server_site_conf_NAGIOS_THEME: classicui

## Addons
checkmk_server_site_conf_MKEVENTD: "on"
checkmk_server_site_conf_MKEVENTD_SNMPTRAP: "off"
checkmk_server_site_conf_MKEVENTD_SYSLOG: "off"
checkmk_server_site_conf_MKEVENTD_SYSLOG_TCP: "off"
checkmk_server_site_conf_PNP4NAGIOS: "on"

## Distributed Monitoring (most important to alter)
checkmk_server_site_conf_LIVESTATUS_TCP: "off"
checkmk_server_site_conf_NSCA: "off"
